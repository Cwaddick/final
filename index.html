<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dnd Crud</title>
    <link rel="stylesheet" href="dnd.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div id="app">
        <ul id="objectList"></ul>
        
        
        <form id="addObjectForm">
            <input type="text" name="objectId" placeholder=" " required>
            <input type="text" name="objectName" placeholder=" " required>
            <input type="text" name="objectDesc" placeholder=" " required>
            <button type="submit">Add Object</button>
        </form>
    
        
        <input type="text" id="objectIdInput" placeholder=" ">
        <button id="displayObjectBtn">Display Object Details</button>
    
        
        <form id="updateObjectForm">
            <input type="text" id="updateObjectIdInput" placeholder=" " required>
            <input type="text" id="updateObjectNameInput" placeholder=" ">
            <input type="text" id="updateObjectDescInput" placeholder=" ">
            <button type="submit">Update Object</button>
        </form>
    
        
        <input type="text" id="deleteObjectIdInput" placeholder=" ">
        <button id="deleteObject">Delete Object</button>
    </div>
</body>
<script>
const retreival =()=> {
    const api = 'https://www.dnd5eapi.co/api/spells';
    let objects = []; 
    function grabdata() {
        $.ajax({
            url: api,
            method: 'GET',
            dataType: 'json',
            success: function(results) {
                objects = results; 
                displayObjects(); 
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.error('Error fetching data:', textStatus, errorThrown);
            }
        });
    }

    
    function displayObjects() {
        const $listContainer = $('#objectList');
        $listContainer.empty(); 

       
        if (Array.isArray(objects)) {
            
            objects.forEach(obj => {
                const $item = $('<li>').text(obj.name); 
                $listContainer.append($item);
            });
        } else {
            console.error('Objects array is not valid:', objects);
        }
    }

    
    grabdata();

    
    $('#addObjectForm').submit(function(event) {
        event.preventDefault();
        const formData = $(this).serializeArray();
        const newObject = {
            id: formData[0].value,
            name: formData[1].value,
            description: formData[2].value
        };
        addObject(newObject);
        $(this)[0].reset(); 
    });

    
    $('#displayObjectBtn').click(function() {
        const objectId = $('#objectIdInput').val();
        displayObject(objectId);
    });

    
    $('#updateObjectForm').submit(function(event) {
        event.preventDefault();
        const objectId = $('#updateObjectIdInput').val();
        const updatedData = {
            name: $('#updateObjectNameInput').val(),
            description: $('#updateObjectDescInput').val()
        };
        updateObject(objectId, updatedData);
        $(this)[0].reset(); 
    });

    
    $('#deleteObjectBtn').click(function() {
        const objectId = $('#deleteObjectIdInput').val();
        deleteObject(objectId);
        $('#deleteObjectIdInput').val(''); 
    });

    
    function addObject(newObject) {
        objects.push(newObject);
        displayObjects(); 
    }

    
    function displayObject(objectId) {
        const object = objects.find(obj => obj.id === objectId);
        if (object) {
            alert(`Object ID: ${object.id}\nName: ${object.name}\nDescription: ${object.description}`);
        } else {
            alert('Object not found!');
        }
    }

  
    function updateObject(objectId, newData) {
        const objectIndex = objects.findIndex(obj => obj.id === objectId);
        if (objectIndex !== -1) {
            objects[objectIndex] = { ...objects[objectIndex], ...newData };
            displayObjects(); 
        } else {
            alert('Object not found!');
        }
    }

    
    function deleteObject(objectId) {
        objects = objects.filter(obj => obj.id !== objectId);
        displayObjects(); 
    }
};
$(document).ready(retreival)
</script>

</html>