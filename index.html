<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dnd Crud</title>
    <link rel="stylesheet" href="dnd.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div id="app">
        <ul id="objectList"></ul>
        
        
        <form id="addObjectForm">
            <input type="text" name="objectId" placeholder=" " required>
            <input type="text" name="objectName" placeholder=" " required>
            <input type="text" name="objectDesc" placeholder=" " required>
            <button type="submit">Add Object</button>
        </form>
    
        
        <input type="text" id="objectIdInput" placeholder=" ">
        <button id="displayObjectBtn">Display Object Details</button>
    
        
        <form id="updateObjectForm">
            <input type="text" id="updateObjectIdInput" placeholder=" " required>
            <input type="text" id="updateObjectNameInput" placeholder=" ">
            <input type="text" id="updateObjectDescInput" placeholder=" ">
            <button type="submit">Update Object</button>
        </form>
    
        
        <input type="text" id="deleteObjectIdInput" placeholder=" ">
        <button id="deleteObject">Delete Object</button>
    </div>
</body>
<script>
const retrieval= ()=> {
    const url = 'https://www.dnd5eapi.co/api/spells';
    let objects = []; 

    
    function fetchData() {
        fetch(url)
            .then(response => response.json())
            .then(data => {
                objects = data; 
                displayObjects(); 
            })
           
    }

    
    function displayObjects() {
        const $listContainer = $('#objectList');
        $listContainer.empty(); 
        objects.forEach(obj => {
            const $item = $('<li>').text(obj.name); 
            $listContainer.append($item);
        });
    }

    
    fetchData();
};

const execution=()=> {
    
    $('#addObjectForm').submit(function(event) {
        event.preventDefault();
        const formData = $(this).serializeArray();
        const newObject = {
            id: formData[0].value,
            name: formData[1].value,
            description: formData[2].value
        };
        addObject(newObject);
        $(this)[0].reset(); 
    });

   
    $('#displayObjectBtn').click(function() {
        const objectId = $('#objectIdInput').val();
        displayObject(objectId);
    });

   
    $('#updateObjectForm').submit(function(event) {
        event.preventDefault();
        const objectId = $('#updateObjectIdInput').val();
        const updatedData = {
            name: $('#updateObjectNameInput').val(),
            description: $('#updateObjectDescInput').val()
        };
        updateObject(objectId, updatedData);
        $(this)[0].reset(); 
    });

    
    $('#deleteObject').click(function() {
        const objectId = $('#deleteObjectIdInput').val();
        deleteObject(objectId);
        $('#deleteObjectIdInput').val(''); 
    });
};

$(document).ready(retrieval)
$(document).ready(execution)
</script>

</html>
